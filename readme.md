# 解决什么问题
* 便于完成项目周边工具
* 便于开发自己使用的工具
* 无依赖随意部署，随意组合

# 本项目产生的结果
* 整个工具集分为3部分 webserver,通信组件(nats),具体的工具；若使用http接口则无通信组件
* 组织形式 webserver 承担展示和操作功能，工具启动则功能上线可用；webserver提供心跳及健康功能
* webserver整合所有接入工具并提供对外接口，可被外部调用

# 关于本项目
* 提供统一工具开发组件
* 底层提供命令行工具支持
* 提供http接口支持
* 提供nats通信支持
* 提供统一存储支持

# 工具开发组件
* RBase 封装命令行操作、http接口、nats通信调用、心跳、标准化输入输出

# webserver
* 提供工具调用操作界面、结果展示界面
* (计划中)提供统一存储
* (计划中)提供用户管理、权限控制

# rbaseTool
* 工具新增一个工具时的初始化，生成初步代码

# 如何开发工具
* rbaseTool 生成初步代码
* 在初步代码中开发功能，格式化输出结果为markdown/json/html格式
* 工具调试在命令行模式下进行调试
* 完成正式启用则 运行于http，nats模式下
* http\nats 模式运行初始参数由工具写入初始代码中

# webserver支持结果展示格式
* markdown  简单格式结果输出
* json      较复杂数据结构  提供指定json描述格式
* html      很复杂结构或为一个站点

# rbaseTool 使用
* 需要首先配置webserver地址参数
* 工具名称分为2级大类名称、子类此工具名称
* 此工具是否需要更多的输入参数，如搜索工具；若有则需配置简单输入框对应html 详见webserver说明
* 配置nats地址和必要参数
* 执行命令生成初始代码

# webserver界面结构
* 界面结构为左大类别列表；右上子类别列表，右下为结果展示

# webserver与工具的交互
* rbaseTool 生成初步代码时即通知webserver 新类别添加，并传递子页面输入项html 用于操作输入参数
* 工具Abox开发完成并以http／nats模式启动则启动心跳
* 操作webserver至子页面时，若此页面无参数 则产生调用，调用工具执行功能。
* 工具接受输入信息执行功能输出结果为指定markdown／json／html格式
* webserver接受结果根据结果格式化为html输出展示。

# 需要遵守的规定
* 工具产生结果输出为指定的markdon或json格式
* rbaseTool 产生初始代码
* 若需输入项时编辑输入框配置参数
* 若有参数输入时传入的参数为map的json格式，参数名与配置参数名相同值为字符串格式
* 日志使用统一日志输出

# 工具输入参数的描述
    
    "params":[
     {
      "hint": "17位tid",    //此参数用户输入时的帮助说明文字
      "label": "任务查询tid",  
      "name": "login_account",
      "type": "text",   //用户需要输入的类型 密码
      "reg":"",         //前端校验输入参数的正则
	  "value":"",       //参数的值 用于单选 复选框时
      "idx":"1"         //排序编号
      }
      ...
     ]
    -------------------- 
    type      为参数类型支持值如下
    text      文本内容
    file      需要传入一个文件
    password  密码输入框 这里不加密
    label     表示只是一个展示框不是输入框
    submit    提交按钮 默认只有一个
    checkbox  复选框   
    radio     单选按钮
    --------------------

# 编辑框配置参数示例


# 完整工具开发示例
* 查询线上任务tid的线上所有相关日志工具

## 编辑框配置参数
    "params":[
    {
       "hint": "17位tid",    //此参数用户输入时的帮助说明文字
       "label": "请输入任务tid",  
       "name": "tid",
       "type": "text",   //用户需要输入的类型 密码
       "reg":"",         //前端校验输入参数的正则
       "value":"",       //参数的值 用于单选 复选框时
       "idx":"1"         //排序编号
     },
     {
       "hint": "查询按钮",    //此参数用户输入时的帮助说明文字
       "label": "查询",  
       "name": "submit",
       "type": "submit",   //用户需要输入的类型 密码
       "reg":"",         //前端校验输入参数的正则
       "value":"",       //参数的值 用于单选 复选框时
       "idx":"2"         //排序编号
     }]
## 工具名称
    大类名称: 自定义
    子类名称: 自定义

## 传入工具的参数
    {"tid":"t173bd83"}

## 工具输出结果格式
    json,markdown,html

## 工具名称
    toolAbc

## 工具运行方式
    命令行： ./toolAbc -mode command -input '{"id":"t173bd83"}'
    //下面两种模式会启动日志输出，日志输出使用包 rlog
    http接口： (./toolAbc -mode http &)  
    nats通信模式：(./toolAbc -mode nats &)

## 工具代码地址：

## 工具的接入
* 为已有工具命名 大类名称，子类名称；确定输入参数及名称生成描述json代码
* 使用rbaseTool生成初始代码
* 将已有工具代码引入 修改输入参数格式，修改输出信息格式
* 工具启动

